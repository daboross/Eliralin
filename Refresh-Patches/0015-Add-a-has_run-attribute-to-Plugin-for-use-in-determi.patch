From 97a74e63092d9bbec44cfc535c8b8c8010673029 Mon Sep 17 00:00:00 2001
From: Dabo Ross <daboross@daboross.net>
Date: Wed, 23 Apr 2014 16:42:08 -0700
Subject: [PATCH] Add a has_run attribute to Plugin for use in determining test
 completeness


diff --git a/cloudbot/core/pluginmanager.py b/cloudbot/core/pluginmanager.py
index cf6d21a..8a1f83e 100644
--- a/cloudbot/core/pluginmanager.py
+++ b/cloudbot/core/pluginmanager.py
@@ -436,6 +436,8 @@ class PluginManager:
             # Run the plugin with the message, and wait for it to finish
             result = yield from self._execute_hook(hook, event)
 
+        hook.has_run = True
+
         # Return the result
         return result
 
@@ -544,6 +546,8 @@ class Hook:
     def description(self):
         return "{}:{}".format(self.plugin.title, self.function_name)
 
+        self.has_run = False
+
     def __repr__(self):
         return "type: {}, plugin: {}, ignore_bots: {}, permissions: {}, single_thread: {}, threaded: {}".format(
             self.type, self.plugin.title, self.ignore_bots, self.permissions, self.single_thread, self.threaded
-- 
2.0.0

